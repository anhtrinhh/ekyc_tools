var __EkycToolsLibrary__;(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{EkycTools:()=>U});var n,r='<svg viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>',o='<svg viewBox="0 0 24 24"><path d="M7 2v11h3v9l7-12h-4l4-8z"></path></svg>',i=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},a=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},c=function(){function e(){}return e.getFileExtensions=function(e){return(e=e.toLowerCase()).startsWith("image/png")?".png":e.startsWith("image/webp")?".webp":e.startsWith("image/jpeg")?".jpg":e.startsWith("video/webm")?".webm":e.startsWith("video/mp4")?".mp4":e.startsWith("video/quicktime")?".mov":e.startsWith("video/x-matroska")?".mkv":e.startsWith("video/mpeg")||e.startsWith("video/mp1s")||e.startsWith("video/mp2p")?".mpg":".webm"},e.delay=function(e){return new Promise((function(t){setTimeout(t,e)}))},e.newGuid=function(){var e="xxxxxxxx-xxxx-4xxx-yxxx-".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),t=new Date;return e+="".concat(t.getUTCFullYear()),t.getUTCMonth()<9?e+="0".concat(t.getUTCMonth()+1):e+=t.getUTCMonth()+1,t.getUTCDate()<10?e+="0".concat(t.getUTCDate()):e+="".concat(t.getUTCDate()),t.getUTCHours()<10?e+="0".concat(t.getUTCHours()):e+=t.getUTCHours(),t.getUTCMinutes()<10?e+="0".concat(t.getUTCMinutes()):e+=t.getUTCMinutes(),t.getUTCSeconds()<10?e+="0".concat(t.getUTCSeconds()):e+=t.getUTCSeconds(),e},e.clearMediaStream=function(e){e&&e.getTracks().forEach((function(t){null==e||e.removeTrack(t),t.stop()}))},e.adjustRatio=function(e){var t=e[0],n=e[1],r=e[2];if(t/n===r)return[t,n];var o=Math.min(t,Math.floor(n*r));return[o,Math.round(o/r)]},e.adjustExactRatio=function(e){var t=e[0],n=e[1],r=e[2];if(t/n===r)return[t,n];var o=Math.min(t,n*r);return[o,o/r]},e.requestFullscreen=function(){return i(this,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),document.fullscreenEnabled?[4,document.documentElement.requestFullscreen()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[3,4];case 3:return e=t.sent(),console.warn(e),[3,4];case 4:return[2]}}))}))},e.exitFullscreen=function(){return i(this,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),null==document.fullscreenElement?[3,2]:[4,document.exitFullscreen()];case 1:t.sent(),t.label=2;case 2:return[3,4];case 3:return e=t.sent(),console.warn(e),[3,4];case 4:return[2]}}))}))},e.isNullOrUndefined=function(e){return null==e},e.clip=function(e,t,n){return e>n?n:e<t?t:e},e.instanceOfGetVideoConfig=function(e){return"recordMs"in e},e.queryByClassName=function(e,t){return void 0===t&&(t=document.body),t.querySelector(".".concat(e))},e.closestByClassName=function(e,t){return t.closest(".".concat(e))},e.queryAllByClassName=function(e,t){return void 0===t&&(t=document.body),t.querySelectorAll(".".concat(e))},e.isMediaStreamConstraintsValid=function(e,t){if(!e)return t.logError("Empty videoConstraints",!0),!1;if("object"!=typeof e){var n=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var r=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),o=0,i=Object.keys(e);o<i.length;o++){var a=i[o];if(r.has(a))return t.logError("".concat(a," is not supported videoConstaints."),!0),!1}return!0},e.createVideoConstraints=function(e){if("string"==typeof e)return{deviceId:{exact:e}};if("object"==typeof e){var t="facingMode",n="deviceId",r={user:!0,environment:!0},o="exact",i=function(e){if(e in r)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(e,"'")},a=Object.keys(e);if(1!==a.length)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(a.length," keys");var c=Object.keys(e)[0];if(c!==t&&c!==n)throw"Only '".concat(t,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(c!==t){var s=e.deviceId;if("string"==typeof s)return{deviceId:s};if("object"==typeof s){if(o in s)return{deviceId:{exact:s["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}throw"Invalid type of 'deviceId' = ".concat(typeof s)}var l=e.facingMode;if("string"==typeof l){if(i(l))return{facingMode:l}}else{if("object"!=typeof l)throw"Invalid type of 'facingMode' = ".concat(typeof l);if(!(o in l))throw"'facingMode' should be string or object with"+" ".concat(o," as key.");if(i(l["".concat(o)]))return{facingMode:{exact:l["".concat(o)]}}}}throw"Invalid type of 'cameraIdOrConfig' = ".concat(typeof e)},e}(),s=function(){function e(){}return e.CONTAINER_DIV="ekyct-container",e.CONTAINER_INNER_DIV="ekyct-container--inner",e.HEADER_DIV="ekyct-header",e.HEADER_INNER_DIV="ekyct-header--inner",e.BODY_DIV="ekyct-body",e.FOOTER_DIV="ekyct-footer",e.FOOTER_INNER_DIV="ekyct-footer--inner",e.CONTAINER_INNER_ROTATE_DIV="ekyct-container--rotate",e.CAPTURE_REGION_DIV="ekyct-capture-region",e.FILE_PICKER_BTN="ekyct-filepicker-btn",e.CAPTURE_BTN="ekyct-capture-btn",e.RECORD_BTN="ekyct-record-btn",e.FLASH_BTN="ekyct-flash-btn",e.CLOSE_BTN="ekyct-close-btn",e.SWITCH_CAMERA_BTN="ekyct-switchcam-btn",e.VIDEO="ekyct-video",e.SHADING_DIV="ekyct-shading",e.CANVAS="ekyct-canvas",e.LOADER_DIV="ekyct-loader",e.ZOOM_CONTAINER_DIV="ekyct-zoom-container",e.LOADER_CONTENT_DIV="ekyct-loader-content",e.CIRCULAR_PROGRESS="ekyct-circular-progress",e.CIRCULAR_PROGRESS_DIV="ekyct-circle-region",e.CIRCULAR_PROGRESS_POINT_DIV="ekyct-circle-region-point",e.DNONE="ekyct-dnone",e}(),l=function(){function e(){}return e.UI_LOADING="loading",e.UI_LOADED="loaded",e.SWITCH_CAMERA="switchCamera",e}(),u=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),d=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},h=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},p=function(){function e(e,t){this.name=e,this.track=t}return e.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},e.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},e.prototype.value=function(){var e=this.track.getSettings();return this.name in e?e[this.name]:null},e}(),f=function(e){function t(t){return e.call(this,"zoom",t)||this}return u(t,e),t}(function(e){function t(t,n){return e.call(this,t,n)||this}return u(t,e),t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var e=this.track.getCapabilities()[this.name];return{min:e.min,max:e.max,step:e.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(p)),m=function(e){function t(t){return e.call(this,"torch",t)||this}return u(t,e),t}(p),y=function(){function e(e){this.track=e}return e.prototype.zoomFeature=function(){return new f(this.track)},e.prototype.flashFeature=function(){return new m(this.track)},e}(),v=function(){function e(e,t,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=n,this.surface=this.createVideoElement(),e.append(this.surface)}return e.prototype.createVideoElement=function(){var e=document.createElement("video");return e.className=s.VIDEO,e.muted=!0,e.setAttribute("muted","true"),e.playsInline=!0,e},e.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var n=e.surface.clientWidth,r=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(n,r),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r){return d(this,void 0,void 0,(function(){var o;return h(this,(function(i){return(o=new e(t,n,r)).setupSurface(),[2,o]}))}))},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(e){this.failIfClosed();var t=this,n=function(){setTimeout(e,200),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getStream=function(){return this.mediaStream},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(e){return d(this,void 0,void 0,(function(){return h(this,(function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]}))}))},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise((function(t,n){var r=e.mediaStream.getVideoTracks().length,o=0;e.mediaStream.getVideoTracks().forEach((function(n){e.mediaStream.removeTrack(n),n.stop(),++o>=r&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())}))}))},e.prototype.getCapabilities=function(){return new y(this.getFirstTrackOrFail())},e}(),g=function(){function e(e){this.mediaStream=e}return e.prototype.render=function(e,t){return d(this,void 0,void 0,(function(){return h(this,(function(n){return[2,v.create(e,this.mediaStream,t)]}))}))},e.create=function(t){return d(this,void 0,void 0,(function(){var n;return h(this,(function(r){switch(r.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return[2,new e(r.sent())]}}))}))},e}(),b=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},C=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},k=function(){function e(){}return e.failIfNotSupported=function(){return b(this,void 0,void 0,(function(){return C(this,(function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]}))}))},e.prototype.create=function(e){return b(this,void 0,void 0,(function(){return C(this,(function(t){return[2,g.create(e)]}))}))},e}(),S=function(){function e(){}return e.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),x=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(e){return"Last Match: ".concat(e)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.flashOnButton=function(){return"Switch On Flash"},e.flashOffButton=function(){return"Switch Off Flash"},e.flashOnFailedMessage=function(){return"Failed to turn on flash"},e.flashOffFailedMessage=function(){return"Failed to turn off flash"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),E=(function(){function e(){}e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"}}(),function(){function e(){}return e.prototype.render=function(e,t){var n=document.createElement("div");n.className="".concat(s.LOADER_DIV," ").concat(s.DNONE);var r=document.createElement("div");r.className=s.LOADER_CONTENT_DIV;for(var o=1;o<=10;o++){var i=document.createElement("span");i.setAttribute("style","--i:"+o),r.appendChild(i)}n.appendChild(r),e.appendChild(n),t.push((function(e){e?n.classList.remove(s.DNONE):n.classList.add(s.DNONE)}))},e.create=function(t,n){var r=new e;return r.render(t,n),r},e}()),I=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},w=function(){function e(){}return e.createBasicLayout=function(e){var t=document.createElement("div");t.className=s.CONTAINER_DIV;var n=document.createElement("div");n.className=s.CONTAINER_INNER_DIV,n.insertAdjacentHTML("beforeend",'<style>.ekyct-btn,.ekyct-zoom-container span{color:#fff}.ekyct-container,.ekyct-container *{margin:0;padding:0;box-sizing:border-box}.ekyct-capture-region.ekyct-hide-shading .ekyct-shading,.ekyct-dnone{display:none!important}.ekyct-capture-region[data-is-record=true]{background-color:#414348}.ekyct-capture-region[data-is-record=true] .ekyct-video{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.ekyct-header{min-height:150px}.ekyct-alert-custom.active{width:100%;max-width:unset;color:#cecece;background-color:transparent;right:50%!important;transform:translateX(50%)!important;font-size:14px;text-align:center;top:80px}.ekyct-alert-custom.active .ekyct-alert-body{padding:0 20px}.ekyct-container--rotate .ekyct-alert-custom.active{width:calc(100% - 200px);top:0;font-size:10px;text-align:left}.ekyct-container--rotate .ekyct-alert-custom.active .ekyct-alert-body{padding:0}.ekyct-container{position:fixed;top:0;left:0;background-color:#202124;z-index:999;height:100%;width:100%;font-family:Arial,Helvetica,sans-serif;display:flex;align-items:center;justify-content:center}.ekyct-capture-region,.ekyct-container--inner{width:100%;height:100%;position:relative;display:flex;overflow:hidden}.ekyct-container--inner{flex-direction:column;max-width:560px}.ekyct-container--rotate{align-items:center;flex-direction:row;max-width:860px}.ekyct-container--rotate .ekyct-capture-region{max-width:680px;max-height:unset}.ekyct-container--rotate .ekyct-footer,.ekyct-container--rotate .ekyct-header{width:unset;height:100%}.ekyct-container--rotate .ekyct-footer--inner,.ekyct-container--rotate .ekyct-header--inner{width:unset;height:100%;flex-direction:column-reverse}.ekyct-btn{border:none;outline:0;background-color:#3c4043;padding:16px;cursor:pointer;line-height:0;border-radius:50%}.ekyct-btn:hover{background-color:#4b5053}.ekyct-btn:active{background-color:#5a5f63}.ekyct-btn:disabled{background-color:#2b2d30;color:#727275;cursor:default}.ekyct-btn svg{fill:currentColor;width:28px;height:28px}.ekyct-body{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.ekyct-capture-region{flex-grow:1;align-items:center;justify-content:center;z-index:1}.ekyct-zoom-container{position:absolute;bottom:2rem;right:50%;transform:translateX(50%);z-index:3;width:60%;display:flex;align-items:center;gap:.5rem;transition:opacity .2s ease-out;opacity:0}.ekyct-zoom-container input{flex-grow:1}.ekyct-capture-region:hover .ekyct-zoom-container{opacity:1}.ekyct-hide-shader-border .ekyct-shading{overflow:hidden}.ekyct-circle-region{display:flex;justify-content:center;align-items:center;rotate:180deg;border-radius:50%;box-shadow:0 0 0 1000px rgba(0,0,0,.5)}.ekyct-circle-region-point{width:4px;height:16px;background-color:rgba(0,0,0,.5);position:absolute;border-radius:4px;transition:10ms ease-out}.ekyct-circle-region-point--marked{background-color:#0f0;box-shadow:0 0 10px #0f0}.ekyct-alert,.ekyct-shader-border{background-color:#fff;position:absolute}.ekyct-footer{display:flex;align-items:center}.ekyct-footer,.ekyct-header{width:100%;flex-grow:1}.ekyct-header--inner{width:100%;display:flex;justify-content:flex-end;padding:20px}.ekyct-header--inner .ekyct-btn{padding:6px}.ekyct-footer--inner{width:100%;display:flex;padding:20px;justify-content:center;gap:1rem}.ekyct-cam-error{width:100%;height:100%}.ekyct-cam-error--inner{width:100%;height:100%;display:flex;justify-content:center;align-items:center;flex-direction:column}.ekyct-cam-error--inner p,.ekyct-cam-error--inner span{color:#ff5100;font-size:12px;text-align:center}.ekyct-cam-error--inner svg{fill:currentColor;width:100px;height:100px}.ekyct-shading{position:absolute;border-style:solid;border-color:rgba(0,0,0,.5);z-index:2}.ekyct-video{width:100%;display:block;position:absolute;z-index:-2}.ekyct-alert{top:10px;right:-10px;transform:translateX(100%);border-radius:4px;font-size:12px;transition:.2s ease-out;max-width:80%;text-align:left;display:flex;z-index:101}.ekyct-alert-header{border-bottom:1px solid rgba(0,0,0,.08);padding:8px 0 8px 4px;display:flex;align-items:center;flex-direction:column}.ekyct-alert.ekyct-alert-column{flex-direction:column}.ekyct-alert.ekyct-alert-reverse{flex-direction:row-reverse}.ekyct-alert-column.ekyct-alert-reverse{flex-direction:column-reverse}.ekyct-alert-reverse .ekyct-alert-header{padding:8px 4px 8px 0}.ekyct-alert-column .ekyct-alert-header{padding:4px 8px;gap:8px;flex-direction:row}.ekyct-alert-header .ekyct-alert-close-btn{background-color:unset;color:rgba(0,0,0,.6);padding:0}.ekyct-alert-header .ekyct-alert-close-btn:hover{color:rgba(0,0,0,.8)}.ekyct-alert-header .ekyct-alert-close-btn:active{color:#000}.ekyct-alert-header .ekyct-alert-close-btn svg{width:16px;height:16px}.ekyct-alert-title{font-weight:700;font-size:16px;flex-grow:1;vertical-align:middle;overflow:hidden;-webkit-line-clamp:1;display:box;display:-webkit-box;-webkit-box-orient:vertical;text-overflow:ellipsis;white-space:normal}.ekyct-alert-body{padding:8px}.ekyct-alert.warning{border:1px solid #ffae00;color:#ffae00}.ekyct-alert.active{right:10px;transform:translateX(0)}.ekyct-loader{position:absolute;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:100}.ekyct-loader-content{position:relative;width:48px;height:48px}.ekyct-loader-content span{position:absolute;top:0;left:0;width:100%;height:100%;transform:rotate(calc(36deg * var(--i)))}.ekyct-loader-content span::before{content:"";position:absolute;top:0;left:0;width:12px;height:12px;border-radius:50%;background-color:rgba(254,254,254,.8);transform:scale(0);animation:1s linear infinite loaderAnimate;animation-delay:calc(.1s * var(--i))}@keyframes loaderAnimate{0%{transform:scale(1)}100%,80%{transform:scale(0)}}.ekyct-circular-progress{position:absolute;width:90px;height:90px;display:flex;align-items:center;justify-content:center;background-color:transparent}.ekyct-circular-progress svg{width:100%;height:100%;transform:rotate(270deg)}.ekyct-circular-progress svg circle{width:100%;height:100%;fill:transparent;stroke-width:3;stroke:#191919;transform:translate(6px,6px)}.ekyct-circular-progress svg circle:last-child{stroke:#0f0;stroke-dasharray:252;stroke-dashoffset:calc(252 - (252 * var(--percent))/ 100)}.ekyct-circular-progress span{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-weight:700;font-size:14px}@media (min-width:768px){.ekyct-alert,.ekyct-cam-error--inner p,.ekyct-cam-error--inner span{font-size:14px}.ekyct-alert-header{padding:10px 0 10px 6px}.ekyct-alert-reverse .ekyct-alert-header{padding:10px 6px 10px 0}.ekyct-alert-column .ekyct-alert-header{padding:6px 10px;gap:10px}.ekyct-alert-reverse.ekyct-alert-column .ekyct-alert-header{border-top:1px solid rgba(0,0,0,.08);border-bottom:unset}.ekyct-alert-header .ekyct-alert-close-btn svg{width:18px;height:18px}.ekyct-alert-title{font-size:18px}.ekyct-alert-body{padding:10px}.ekyct-cam-error--inner svg{width:140px;height:140px}.ekyct-loader-content{width:54px;height:54px}.ekyct-loader-content span::before{width:14px;height:14px}}@media (min-width:992px){.ekyct-loader-content{width:60px;height:60px}.ekyct-loader-content span::before{width:16px;height:16px}}</style>'),t.dataset.version="1.0.0-fpts";var r=document.createElement("div");r.className=s.CAPTURE_REGION_DIV,E.create(r,e);var o=this.createFooter(),i=document.createElement("div");return i.className=s.BODY_DIV,i.appendChild(r),n.appendChild(this.createHeader()),n.appendChild(i),n.appendChild(o),t.appendChild(n),t},e.handleOnScreenResize=function(e){var t,n=this;null===(t=c.closestByClassName(s.CONTAINER_DIV,e))||void 0===t||t.dispatchEvent(new CustomEvent(l.UI_LOADING)),setTimeout((function(){n.setupUI(e)}),this.delaySetupUIMs)},e.setupCamera=function(e,t,n){var r=this;void 0===n&&(n=null);var o=c.closestByClassName(s.CONTAINER_DIV,e);null==o||o.dispatchEvent(new CustomEvent(l.UI_LOADING));var i={onRenderSurfaceReady:function(){r.setupUI(e)}};return new Promise((function(a,c){n?n.close().then((function(){return r.renderCamera(e,o,i,a,c,t)})).catch((function(e){null==o||o.dispatchEvent(new CustomEvent(l.UI_LOADED,{detail:{error:e}})),c(e)})):r.renderCamera(e,o,i,a,c,t)}))},e.setupUI=function(e){var t=this,n=c.closestByClassName(s.CONTAINER_INNER_DIV,e);n.clientWidth>=n.clientHeight?n.classList.add(s.CONTAINER_INNER_ROTATE_DIV):n.classList.remove(s.CONTAINER_INNER_ROTATE_DIV),setTimeout((function(){var n=c.queryByClassName(s.VIDEO,e);if(n){var r=n.clientWidth,o=n.clientHeight;t.insertShadingElement(e,r,o),t.insertCanvasElement(e,r,o),t.insertCircleRegion(e,r,o)}}),this.delaySetupUIMs)},e.getCapture=function(e){var t=this;return new Promise((function(n,r){var o=c.queryByClassName(s.CANVAS,e),i=c.queryByClassName(s.VIDEO,e);if(i&&o){var a=o.getContext("2d",{willReadFrequently:!0}),l=c.queryByClassName(s.SHADING_DIV,e),u=0,d=0,h=i.clientWidth,p=e.clientHeight>i.clientHeight?i.clientHeight:e.clientHeight;l&&(u=parseFloat(l.style.borderLeftWidth.slice(0,-2)),d=parseFloat(l.style.borderTopWidth.slice(0,-2)),h=parseFloat(l.style.width.slice(0,-2)),p=parseFloat(l.style.height.slice(0,-2)));var f=h-2*u,m=p-2*d,y=i.videoWidth/i.clientWidth,v=i.videoHeight/i.clientHeight,g=0;i.clientHeight>p&&(g=(i.clientHeight-p)/2);var b=Math.round(u*y),C=Math.round((d+g)*v),k=Math.round(f*y),S=Math.round(m*v);k%2!=0&&(k-=1),S%2!=0&&(S-=1);var x=parseInt(o.style.width.slice(0,-2)),E=parseInt(o.style.height.slice(0,-2));a.canvas.width=x,a.canvas.height=E,a.drawImage(i,b,C,k,S,0,0,x,E),t.getBlobFromCanvas(o,"image/png").then((function(e){n(e)})).catch((function(e){r(e)}))}else r("Video element is not exists.")}))},e.getBlobFromCanvas=function(e,t){return new Promise((function(n){e.toBlob((function(e){return n(e)}),t)}))},e.addAlert=function(e,t){var n=c.queryByClassName(s.CAPTURE_REGION_DIV,e);if(t.parentSelector){var r=e.querySelector(t.parentSelector);r&&(n=r)}if(n){var o=n.querySelector(".ekyct-alert");o?this.getAlertContent(o)!==t.content&&(o.classList.contains("active")&&!this.insertAlertTimeout&&o.classList.remove("active"),this.insertAlertTimeout||(this.setAlertContent(o,t.content),"number"==typeof t.displayTimeout&&t.displayTimeout>=1e3?this.setInsertAlertTimeout(o,t.displayTimeout+200,200):o.classList.add("active"))):(o=this.createAlertElement(t.content,t.title,t.classList,t.enableClose),n.appendChild(o),o.classList.contains("active")||this.insertAlertTimeout||(this.setAlertContent(o,t.content),"number"==typeof t.displayTimeout&&t.displayTimeout>=1e3?this.setInsertAlertTimeout(o,t.displayTimeout+20,20):o.classList.add("active")))}},e.createAlertElement=function(e,t,n,o){var i,a=document.createElement("div"),c=["ekyct-alert"];if("string"==typeof t&&t.trim().length>0||"boolean"==typeof o&&o){var s=document.createElement("div");if(s.className="ekyct-alert-header","string"==typeof t){t=t.trim();var l=document.createElement("div");l.className="ekyct-alert-title",s.appendChild(l),l.innerHTML=t,c.push("ekyct-alert-column")}if("boolean"==typeof o&&o){var u=document.createElement("button");u.className="ekyct-btn ekyct-alert-close-btn",u.innerHTML=r,u.addEventListener("click",(function(e){e.preventDefault(),a.classList.remove("active")}),{once:!0}),s.appendChild(u)}a.appendChild(s)}var d=document.createElement("div");return d.className="ekyct-alert-body",a.appendChild(d),Array.isArray(n)&&n.length>0&&(c=I(I([],c,!0),n,!0)),"string"==typeof e&&e.trim().length>0&&(e=e.trim(),d.innerHTML=e),(i=a.classList).add.apply(i,c),a},e.getAlertContent=function(e){var t=e.querySelector(".ekyct-alert-body");return t?t.innerHTML:""},e.setAlertContent=function(e,t){if("string"==typeof t&&t.trim().length>0){var n=e.querySelector(".ekyct-alert-body");n&&(n.innerHTML=t)}},e.setInsertAlertTimeout=function(e,t,n){var r=this;this.insertAlertTimeout=setTimeout((function(){e.classList.add("active"),setTimeout((function(){r.clearInsertAlertTimeout()}),t)}),n)},e.clearInsertAlertTimeout=function(){this.insertAlertTimeout&&(clearTimeout(this.insertAlertTimeout),this.insertAlertTimeout=null)},e.renderCamera=function(e,t,n,r,o,i){k.failIfNotSupported().then((function(a){a.create(i).then((function(i){i.render(e,n).then((function(e){r(e)})).catch((function(e){null==t||t.dispatchEvent(new CustomEvent(l.UI_LOADED,{detail:{error:e}})),o(e)}))})).catch((function(e){null==t||t.dispatchEvent(new CustomEvent(l.UI_LOADED,{detail:{error:e}})),o(S.errorGettingUserMedia(e))}))})).catch((function(e){null==t||t.dispatchEvent(new CustomEvent(l.UI_LOADED,{detail:{error:e}})),o(S.cameraStreamingNotSupported())}))},e.insertShadingElement=function(e,t,n){var r,o;if("false"===e.dataset.isRecord){var i=parseFloat(null!==(r=e.dataset.shadingRatio)&&void 0!==r?r:"0");if((isNaN(i)||i<0)&&(i=0),i>0){null===(o=c.queryByClassName(s.SHADING_DIV,e))||void 0===o||o.remove();var a=e.clientHeight>n?n:e.clientHeight,l=document.createElement("div");l.className=s.SHADING_DIV,l.style.width="".concat(t,"px"),l.style.height="".concat(a,"px");var u=this.getShadingBorderSize(t,a,i);return l.style.borderLeftWidth="".concat(u.borderX,"px"),l.style.borderRightWidth="".concat(u.borderX,"px"),l.style.borderTopWidth="".concat(u.borderY,"px"),l.style.borderBottomWidth="".concat(u.borderY,"px"),this.insertShaderBorders(l,this.shardBorderLargeSize,this.shardBorderSmallSize,-this.shardBorderSmallSize,null,0,!0),this.insertShaderBorders(l,this.shardBorderLargeSize,this.shardBorderSmallSize,-this.shardBorderSmallSize,null,0,!1),this.insertShaderBorders(l,this.shardBorderLargeSize,this.shardBorderSmallSize,null,-this.shardBorderSmallSize,0,!0),this.insertShaderBorders(l,this.shardBorderLargeSize,this.shardBorderSmallSize,null,-this.shardBorderSmallSize,0,!1),this.insertShaderBorders(l,this.shardBorderSmallSize,this.shardBorderLargeSize+this.shardBorderSmallSize,-this.shardBorderSmallSize,null,-this.shardBorderSmallSize,!0),this.insertShaderBorders(l,this.shardBorderSmallSize,this.shardBorderLargeSize+this.shardBorderSmallSize,null,-this.shardBorderSmallSize,-this.shardBorderSmallSize,!0),this.insertShaderBorders(l,this.shardBorderSmallSize,this.shardBorderLargeSize+this.shardBorderSmallSize,-this.shardBorderSmallSize,null,-this.shardBorderSmallSize,!1),this.insertShaderBorders(l,this.shardBorderSmallSize,this.shardBorderLargeSize+this.shardBorderSmallSize,null,-this.shardBorderSmallSize,-this.shardBorderSmallSize,!1),e.appendChild(l),l}}return null},e.insertCanvasElement=function(e,t,n){var r,o,i,a,u=parseFloat(null!==(r=e.dataset.canvasMaxWidth)&&void 0!==r?r:"0");(isNaN(u)||u<0)&&(u=0),u%2!=0&&(u-=1);var d=parseFloat(null!==(o=e.dataset.canvasMinWidth)&&void 0!==o?o:"0");(isNaN(d)||d<0)&&(d=0),d%2!=0&&(d+=1);var h=c.queryByClassName(s.SHADING_DIV,e),p=0,f=0,m=t,y=e.clientHeight>n?n:e.clientHeight;h&&(p=2*parseFloat(h.style.borderLeftWidth.slice(0,-2)),f=2*parseFloat(h.style.borderTopWidth.slice(0,-2)),m=parseFloat(h.style.width.slice(0,-2)),y=parseFloat(h.style.height.slice(0,-2))),null===(i=c.queryByClassName(s.CANVAS,e))||void 0===i||i.remove();var v=m-p,g=y-f;u>0&&v>u?v=u:d>0&&v<d&&(v=d),(v=Math.floor(v))%2!=0&&(v+=1),v!==u&&v!==d||(g=v*g/(m-p)),(g=Math.floor(g))%2!=0&&(g+=1);var b=document.createElement("canvas");return b.className=s.CANVAS,b.style.width="".concat(v,"px"),b.style.height="".concat(g,"px"),b.style.display="none",e.appendChild(b),null===(a=c.closestByClassName(s.CONTAINER_DIV,e))||void 0===a||a.dispatchEvent(new CustomEvent(l.UI_LOADED,{detail:{canvas:b}})),b},e.insertCircleRegion=function(e,t,n){if("true"===e.dataset.isRecord){var r=c.queryByClassName(s.CIRCULAR_PROGRESS_DIV,e),o=e.clientWidth,i=e.clientHeight,a=o<i?o:i,l=t<n?t:n,u=void 0;(u=a<l?a*this.sizeRatio:l*this.sizeRatio)<this.shardBorderSmallSize&&(u=this.shardBorderSmallSize);var d=a<l?a-u:l-u;if(r)c.queryAllByClassName(s.CIRCULAR_PROGRESS_POINT_DIV).forEach((function(e,t){e.style.transform="rotate(".concat(3.6*t,"deg) translateY(").concat(d/2-10,"px)")}));else{(r=document.createElement("div")).className=s.CIRCULAR_PROGRESS_DIV;for(var h=0;h<100;h++){var p=document.createElement("div");p.className=s.CIRCULAR_PROGRESS_POINT_DIV,r.appendChild(p),p.style.transform="rotate(".concat(3.6*h,"deg) translateY(").concat(d/2-10,"px)")}e.appendChild(r)}r.style.width="".concat(d,"px"),r.style.height="".concat(d,"px")}},e.insertShaderBorders=function(e,t,n,r,o,i,a){var c=document.createElement("div");c.className="ekyct-shader-border",c.style.width="".concat(t,"px"),c.style.height="".concat(n,"px"),null!==r&&(c.style.top="".concat(r,"px")),null!==o&&(c.style.bottom="".concat(o,"px")),a?c.style.left="".concat(i,"px"):c.style.right="".concat(i,"px"),e.appendChild(c)},e.getShadingBorderSize=function(e,t,n){var r,o=c.adjustExactRatio([e,t,n]),i=(e-o[0])/2,a=(t-o[1])/2;return(r=i>a?t*this.sizeRatio:e*this.sizeRatio)<this.shardBorderSmallSize&&(r=this.shardBorderSmallSize),a<r&&(i=(e-(t-2*(a=r))*n)/2),i<r&&(a=(t-(e-2*(i=r))/n)/2),{borderX:i,borderY:a}},e.createHeader=function(){var e=document.createElement("div");e.className="ekyct-header";var t=document.createElement("div");t.className="ekyct-header--inner";var n=document.createElement("button");return n.className="ekyct-btn ".concat(s.CLOSE_BTN),n.disabled=!0,n.innerHTML=r,t.appendChild(n),e.appendChild(t),e},e.createFooter=function(){var e=document.createElement("div");e.className=s.FOOTER_DIV;var t=document.createElement("div");return t.className=s.FOOTER_INNER_DIV,e.appendChild(t),e},e.insertAlertTimeout=null,e.sizeRatio=.06,e.shardBorderLargeSize=40,e.shardBorderSmallSize=5,e.delaySetupUIMs=50,e}(),N=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=S.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=S.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var e=location.host.split(":")[0];return"127.0.0.1"===e||"localhost"===e},e.getCamerasFromMediaDevices=function(){return e=this,t=void 0,r=function(){var e,t,n,r,o,i,a;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}(this,(function(c){switch(c.label){case 0:return e=function(e){for(var t=0,n=e.getVideoTracks();t<n.length;t++){var r=n[t];r.enabled=!1,r.stop(),e.removeTrack(r)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=c.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=c.sent(),r=[],o=0,i=n;o<i.length;o++)"videoinput"===(a=i[o]).kind&&r.push({id:a.deviceId,label:a.label});return e(t),[2,r]}}))},new((n=void 0)||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}));var e,t,n,r},e.getCamerasFromMediaStreamTrack=function(){return new Promise((function(e,t){MediaStreamTrack.getSources((function(t){for(var n=[],r=0,o=t;r<o.length;r++){var i=o[r];"video"===i.kind&&n.push({id:i.id,label:i.label})}e(n)}))}))},e}(),T=function(){function e(){}return e.createImageResult=function(e){return e?{blob:e,contentName:"".concat(c.newGuid()).concat(c.getFileExtensions(e.type)),contentLength:e.size,contentType:e.type}:null},e.createVideoResult=function(e,t){return e?{blob:e,contentLength:e.size,contentType:e.type,contentName:"".concat(c.newGuid()).concat(c.getFileExtensions(e.type)),poster:this.createImageResult(t)}:null},e}(),R=function(){function e(e){this.verbose=e}return e.prototype.log=function(e){this.verbose&&console.log(e)},e.prototype.warn=function(e){this.verbose&&console.warn(e)},e.prototype.logError=function(e,t){(this.verbose||!0===t)&&console.error(e)},e.prototype.logErrors=function(e){if(0===e.length)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},e}(),B=function(){function e(e,t,n,r,o){var i=document.createElement("button");i.className="ekyct-btn ".concat(s.FILE_PICKER_BTN),i.innerHTML='<svg viewBox="0 0 24 24"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z"></path></svg>',i.disabled=!0;var a=document.createElement("input");a.type="file",a.accept=t,a.onchange=function(){if(a.files){var e=a.files[0];o&&o({blob:e,contentName:"".concat(c.newGuid(),".png"),contentLength:e.size,contentType:e.type})}},i.addEventListener("click",(function(e){e.preventDefault(),a.click(),r&&r()})),n.push((function(e){i.disabled=!!e})),e.appendChild(i)}return e.create=function(t,n,r,o,i){return new e(t,n,r,o,i)},e}(),O=function(){function e(e,t){this.deviceIndex=-1,this.cameras=e,t&&(this.deviceIndex=e.findIndex((function(e){return e.id===t})),-1===this.deviceIndex&&(this.deviceIndex=0))}return e.prototype.render=function(e,t){var n=this;if(this.cameras.length>1){var r=c.closestByClassName(s.CONTAINER_DIV,e),o=document.createElement("button");o.className="ekyct-btn ".concat(s.SWITCH_CAMERA_BTN),o.innerHTML='<svg viewBox="0 0 24 24"><path d="M16 7h-1l-1-1h-4L9 7H8c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zm-4 7c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"></path><path d="m8.57.51 4.48 4.48V2.04c4.72.47 8.48 4.23 8.95 8.95h2C23.34 3.02 15.49-1.59 8.57.51zm2.38 21.45c-4.72-.47-8.48-4.23-8.95-8.95H0c.66 7.97 8.51 12.58 15.43 10.48l-4.48-4.48v2.95z"></path></svg>',o.disabled=!0,o.addEventListener("click",(function(e){e.preventDefault(),n.deviceIndex===n.cameras.length-1?n.deviceIndex=0:n.deviceIndex++;var t=new CustomEvent(l.SWITCH_CAMERA,{detail:{deviceId:n.cameras[n.deviceIndex].id}});r.dispatchEvent(t)})),t.push((function(e){o.disabled=!!e})),e.appendChild(o)}},e.create=function(t,n,r,o){var i=new e(n,o);return i.render(t,r),i},e}(),_=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},A=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},D=function(){function e(e,t,n){this.isFlashOn=!1,this.flashCapability=e,this.buttonController=t,this.onFlashActionFailureCallback=n}return e.prototype.isFlashEnabled=function(){return this.isFlashOn},e.prototype.flipState=function(){return _(this,void 0,void 0,(function(){var e,t;return A(this,(function(n){switch(n.label){case 0:this.buttonController.disable(),e=!this.isFlashOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.flashCapability.apply(e)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.flashCapability.value(),e),[3,4];case 3:return t=n.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}}))}))},e.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setHTML(t?'<svg viewBox="0 0 24 24"><path d="M3.27 3 2 4.27l5 5V13h3v9l3.58-6.14L17.73 20 19 18.73 3.27 3zM17 10h-4l4-8H7v2.18l8.46 8.46L17 10z"></path></svg>':o),this.isFlashOn=t):this.propagateFailure(t),this.buttonController.enable()},e.prototype.propagateFailure=function(e,t){var n=e?x.flashOnFailedMessage():x.flashOffFailedMessage();t&&(n+="; Error = "+t),this.onFlashActionFailureCallback(n)},e.prototype.reset=function(){this.isFlashOn=!1},e}(),L=function(){function e(e,t){this.onFlashActionFailureCallback=t,this.flashButton=document.createElement("button"),this.flashUI=new D(e,this,t)}return e.prototype.render=function(e,t){var n=this;this.flashButton.className="ekyct-btn ".concat(s.FLASH_BTN),this.flashButton.disabled=!0,this.flashButton.addEventListener("click",(function(e){return _(n,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return e.preventDefault(),[4,this.flashUI.flipState()];case 1:return t.sent(),[2]}}))}))})),t.push((function(e){n.flashButton.disabled=!!e})),e.appendChild(this.flashButton)},e.prototype.updateFlashCapability=function(e){this.flashUI=new D(e,this,this.onFlashActionFailureCallback)},e.prototype.hide=function(){this.flashButton.classList.add(s.DNONE)},e.prototype.show=function(){this.flashButton.innerHTML=o,this.flashButton.classList.remove(s.DNONE)},e.prototype.disable=function(){this.flashButton.disabled=!0},e.prototype.enable=function(){this.flashButton.disabled=!1},e.prototype.setHTML=function(e){this.flashButton.innerHTML=e},e.prototype.reset=function(){this.flashButton.innerHTML=o,this.flashUI.reset()},e.create=function(t,n,r,o){var i=new e(n,r);return i.render(t,o),i},e}(),z=function(){function e(e,t,n,r){this.captureRegion=e,this.onStart=t,this.onStop=n,this.onError=r}return e.prototype.render=function(e){var t,n=this;null===(t=c.queryByClassName(s.CAPTURE_BTN,e))||void 0===t||t.remove();var r=document.createElement("button");r.className="ekyct-btn ".concat(s.CAPTURE_BTN),r.innerHTML='<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="3.2"></circle><path d="M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"></path></svg>',r.addEventListener("click",(function(e){n.onStart&&n.onStart(),e.preventDefault(),w.getCapture(n.captureRegion).then((function(e){n.onStop&&(e?n.onStop(T.createImageResult(e)):n.onStop(null))})).catch((function(e){n.onError&&n.onError(e)}))})),e.appendChild(r)},e.create=function(t,n,r,o,i){var a=new e(n,r,o,i);return a.render(t),a},e}(),M=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.zoomElementContainer.className=s.ZOOM_CONTAINER_DIV,this.rangeInput=document.createElement("input"),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(e){var t=this;e.appendChild(this.zoomElementContainer),this.rangeText.innerText="".concat(this.rangeInput.value,"x"),this.rangeInput.addEventListener("input",(function(){return t.onValueChange()})),this.rangeInput.addEventListener("change",(function(){return t.onValueChange()})),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){this.rangeText.innerText="".concat(this.rangeInput.value,"x"),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(e,t,n,r){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=r.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.classList.remove(s.DNONE)},e.prototype.hide=function(){this.zoomElementContainer.classList.add(s.DNONE)},e.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t){var n=new e;return n.render(t),n},e}(),F=function(){function e(e,t){this.durationMilliseconds=0,this.progressMs=t,this.parentElement=e}return e.prototype.setPercent=function(e){var t=c.queryByClassName(s.CIRCULAR_PROGRESS_DIV,this.parentElement);t&&c.queryAllByClassName(s.CIRCULAR_PROGRESS_POINT_DIV,t).forEach((function(t,n){n<e?t.classList.add("ekyct-circle-region-point--marked"):t.classList.remove("ekyct-circle-region-point--marked")}))},e.prototype.start=function(){var t=this;return this.reset(),new Promise((function(n){t.interval=setInterval((function(){t.durationMilliseconds+=e.delayMilliseconds;var r=Math.floor(t.durationMilliseconds/t.progressMs*100);t.setPercent(r),t.durationMilliseconds>=t.progressMs&&n(null)}),e.delayMilliseconds)}))},e.prototype.reset=function(){this.durationMilliseconds=0,this.setPercent(0),this.interval&&clearInterval(this.interval)},e.create=function(t,n){return new e(t,n)},e.delayMilliseconds=500,e}(),V=function(){function e(e,t,n,r){this.mediaStream=null,this.recorder=null,this.recordProgress=null,this.recording=!1,this.recordButton=document.createElement("button"),this.config=e,this.onStart=t,this.onStop=n,this.onError=r}return e.prototype.render=function(e,t,n){var r=this;this.recordButton.className="ekyct-btn ".concat(s.RECORD_BTN),this.recordButton.disabled=!0,this.recordButton.addEventListener("click",(function(e){e.preventDefault(),r.mediaStream&&!r.recording&&(r.recording=!0,r.recordButton.disabled=!0,r.onStart&&r.onStart(),r.recorder=new MediaRecorder(r.mediaStream,{videoBitsPerSecond:r.config.videoBitsPerSecond}),r.recorder.ondataavailable=function(e){return n=r,o=void 0,a=function(){var n,r,o;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),this.onStop?(n=e.data,[4,w.getCapture(t)]):[3,2];case 1:r=i.sent(),this.recording=!1,this.recordButton.disabled=!1,this.onStop(T.createVideoResult(n,r)),i.label=2;case 2:return[3,4];case 3:return o=i.sent(),this.onError&&this.onError(o),[3,4];case 4:return[2]}}))},new((i=void 0)||(i=Promise))((function(e,t){function r(e){try{s(a.next(e))}catch(e){t(e)}}function c(e){try{s(a.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(r,c)}s((a=a.apply(n,o||[])).next())}));var n,o,i,a},r.recorder.onstart=function(){if(r.recordProgress)r.recordProgress.reset();else{var e=r.config.recordMs&&r.config.recordMs%100==0&&r.config.recordMs>=1e3?r.config.recordMs:6e3;r.recordProgress=F.create(t,e)}r.recordProgress.start().then((function(){var e;null===(e=r.recorder)||void 0===e||e.stop()}))},r.recorder.start())})),e.appendChild(this.recordButton),n.push((function(e){r.recordButton.disabled=!!e}))},e.prototype.show=function(){this.recordButton.innerHTML='<svg viewBox="0 0 24 24"><path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"></path></svg>',this.recordButton.classList.remove(s.DNONE)},e.prototype.hide=function(){this.recordButton.classList.add(s.DNONE)},e.prototype.setStream=function(e){this.mediaStream=e,this.recorder&&(this.recorder.stop(),this.recorder=null)},e.create=function(t,n,r,o,i,a,c){var s=new e(o,i,a,c);return s.render(t,n,r),s},e}(),U=function(){function e(e){this.openning=!1,this.loadHandlers=[],this.flashButton=null,this.zoomInput=null,this.recordUI=null,this.element=null,this.renderedCamera=null,this.verbose=!0===e,this.logger=new R(this.verbose)}return e.getCameraDevices=function(){return N.retrieve()},e.prototype.addAlert=function(e){this.element&&w.addAlert(this.element,e)},e.prototype.open=function(e){this.openning||(this.openning=!0,this.element=w.createBasicLayout(this.loadHandlers),document.body.appendChild(this.element),e.onOpen&&e.onOpen(),this.createSectionControlPanel(e))},e.prototype.close=function(){var e=this;return this.openning&&(this.flashButton&&(this.flashButton.reset(),this.flashButton.hide(),this.flashButton=null),this.zoomInput&&(this.zoomInput.removeOnCameraZoomValueChangeCallback(),this.zoomInput.hide(),this.zoomInput=null),this.recordUI&&(this.recordUI.hide(),this.recordUI=null)),new Promise((function(t,n){e.renderedCamera&&e.openning?e.renderedCamera.close().then((function(){e.element&&document.body.removeChild(e.element),e.openning=!1,t(null)})).catch((function(t){e.logger.logError(t),e.openning=!1,n(t)})):(e.element&&document.body.removeChild(e.element),e.openning=!1,t(null))}))},e.prototype.createSectionControlPanel=function(e){var t=this,n=c.queryByClassName(s.CAPTURE_REGION_DIV,this.element),r=c.queryByClassName(s.FOOTER_INNER_DIV,this.element),o=c.queryByClassName(s.CLOSE_BTN,this.element),i=c.instanceOfGetVideoConfig(e);n.dataset.shadingRatio=e.shadingRatio.toString(),n.dataset.canvasMaxWidth=e.canvasMaxWidth.toString(),n.dataset.canvasMinWidth=e.canvasMinWidth.toString(),n.dataset.isRecord=i.toString(),this.loadHandlers.push((function(e){o.disabled=!!e})),o.addEventListener("click",(function(e){e.preventDefault(),t.close()}));var a=i?"video/mp4,video/webm,video/mov":"image/jpeg,image/png,image/webp";this.element.addEventListener(l.UI_LOADING,(function(){if(t.loadHandlers.forEach((function(e){return e(!0)})),!i){var e=c.queryByClassName(s.CAPTURE_BTN,t.element);e&&(e.disabled=!0)}})),this.element.addEventListener(l.UI_LOADED,(function(o){var a=o;if(t.loadHandlers.forEach((function(e){return e(!1)})),a.detail){var c=a.detail.canvas,s=a.detail.error;c&&!i&&z.create(r,n,e.onStart,e.onStop,e.onError),s&&e.onError&&e.onError(s)}})),e.enableFilePicker&&B.create(r,a,this.loadHandlers,e.onStart,e.onStop),e.enableSwitchCamera?N.retrieve().then((function(o){w.setupCamera(n,e.video).then((function(i){t.setRenderedCamera(i,e);var a=i.getRunningTrackSettings().deviceId;O.create(r,o,t.loadHandlers,a),t.element.addEventListener(l.SWITCH_CAMERA,(function(r){var o=r;"boolean"==typeof e.video?e.video={deviceId:{exact:o.detail.deviceId}}:e.video.deviceId={exact:o.detail.deviceId},w.setupCamera(n,e.video,t.renderedCamera).then((function(n){return t.setRenderedCamera(n,e)})).catch((function(n){e.onError&&e.onError(n),t.logger.logError(n)}))}))})).catch((function(n){e.onError&&e.onError(n),t.logger.logError(n)}))})).catch((function(n){var r;null===(r=t.element)||void 0===r||r.dispatchEvent(new CustomEvent(l.UI_LOADED)),e.onError&&e.onError(n),t.logger.logError(n)})):w.setupCamera(n,e.video).then((function(n){return t.setRenderedCamera(n,e)})).catch((function(n){e.onError&&e.onError(n),t.logger.logError(n)}))},e.prototype.setRenderedCamera=function(e,t){this.renderedCamera=e;var n=e.getCapabilities();t.enableFlash&&this.createAndShowFlashButtonIfSupported(n,t.onError),this.renderCameraZoomUiIfSupported(n,t.zoom),this.createAndShowRecordUI(e.getStream(),t)},e.prototype.createAndShowRecordUI=function(e,t){if(c.instanceOfGetVideoConfig(t)){if(!this.recordUI){var n=c.queryByClassName(s.FOOTER_INNER_DIV,this.element),r=c.queryByClassName(s.CAPTURE_REGION_DIV,this.element);this.recordUI=V.create(n,r,this.loadHandlers,{recordMs:t.recordMs,videoBitsPerSecond:t.videoBitsPerSecond},t.onStart,t.onStop,t.onError)}this.recordUI.setStream(e),this.recordUI.show()}},e.prototype.createAndShowFlashButtonIfSupported=function(e,t){var n=this;if(e.flashFeature().isSupported()){if(this.flashButton)this.flashButton.updateFlashCapability(e.flashFeature());else{var r=c.queryByClassName(s.FOOTER_INNER_DIV,this.element);this.flashButton=L.create(r,e.flashFeature(),(function(e){t&&t(e),n.logger.logError(e)}),this.loadHandlers)}this.flashButton.show()}else this.flashButton&&this.flashButton.hide()},e.prototype.renderCameraZoomUiIfSupported=function(e,t){var n=e.zoomFeature();if(n.isSupported()){if(!this.zoomInput){var r=c.queryByClassName(s.CAPTURE_REGION_DIV,this.element);this.zoomInput=M.create(r)}this.zoomInput.setOnCameraZoomValueChangeCallback((function(e){n.apply(e)}));var o=1;t&&t>0&&(o=t),o=c.clip(o,n.min(),n.max()),this.zoomInput.setValues(n.min(),n.max(),o,n.step()),this.zoomInput.show()}},e}();window.addEventListener("resize",(function(){document.querySelectorAll(".".concat(s.CAPTURE_REGION_DIV)).forEach((function(e){w.handleOnScreenResize(e)}))})),__EkycToolsLibrary__=t})();if(window){if(!EkycTools){var EkycTools=window.__EkycToolsLibrary__.EkycTools}}